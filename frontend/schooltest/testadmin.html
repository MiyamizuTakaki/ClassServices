<html lang="en">
<head>
    <!-- 新 Bootstrap4 核心 CSS 文件 -->
    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <!-- jQuery文件。务必在bootstrap.min.js 之前引入 -->
    <script src="/js/jquery.min.js"></script>
    <!-- popper.min.js 用于弹窗、提示、下拉菜单 -->
    <script src="/js/popper.min.js"></script>
    <!-- 最新的 Bootstrap4 核心 JavaScript 文件 -->
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/jquery.cookie.min.js"></script>

    <meta charset="UTF-8">
    <link href="/css/normalform.css" rel="stylesheet" type="text/css">
    <link href="/js/veritylogin.js" rel="stylesheet" type="text/css">
    <link href="/css/bootstrap-table.min.css" rel="stylesheet">
    <script src="/js/bootstrap-table.min.js"></script>
    <!--<script src="/js/navgeter.js" type="application/javascript"></script>-->
    <title>Управляйте моими тестами</title>
</head>
<div class="container">
    <h2>Управляйте тестами и упражнениями</h2>
    <div class="row">
        <div class="col">
            <button type="button" id="addtest" class="btn btn-primary">Создавайте тестовые вопросы</button>
        </div>
    </div>
    <div class="container">
        <div class="row">
            <div class="col-4">
                <label for="selectDay">Критерии фильтрации</label><select class="form-control form-control-placeholder"
                                                                          id="selectDay">
                <option disabled hidden id="chse1" selected value="-1">Выбрать все</option>
                <option style="color: black;" value="-1">Выбрать все</option>
                <option style="color: black;" value="0">Номер группы</option>
                <option style="color: black;" value="1">Название отдела</option>
                <option style="color: black;" value="2">Название темы</option>
                <option style="color: black;" value="3">название</option>
                <option style="color: black;" value="4">серийный номер</option>
            </select>
            </div>
            <div class="col-4"><label>Критерии фильтрации</label>

                <input class="form-control" id="textinfo" placeholder="содержание" type="text"></div>
            <div class="col-4">
                <div class="col-4"><label>А потом просто</label>
                    <button class="btn btn-primary" data-dismiss="modal" id="pwduser">поиск</button>
                </div>
            </div>
        </div>
        <div id="magerinfo">
            <table class="table table-hover" id="mytab"></table>
        </div>
    </div>
</div>
<script>
    $('#mytab').bootstrapTable({
        url: '/getgroup?ptr=-1',
        method: 'get',
        toolbar: "#toolbar",
        sidePagination: "client",
        striped: true, // 是否显示行间隔色
        search: "true",
        uniqueId: "grpnum",
        pageSize: "5",
        pagination: true, // 是否分页
        sortable: true, // 是否启用排序
        columns: [{
            field: 'grpnum',
            title: '组号'
        },
            {
                field: 'examid',
                title: '试题编号'
            },
            {
                field: 'examname',
                title: '试题名称'
            },
            {
                field: 'examgroup',
                title: '小组'
            },
            {
                field: 'statdate',
                title: '开始日期'
            },
            {
                field: 'enddate',
                title: '结束日期'
            },
            {
                field: 'examtime',
                title: '考试时长'
            },
            {
                field: 'examlist',
                title: '试题数量'
            },
            {
                field: 'examsouces',
                title: '考试总分'
            },
            {
                field: 'examstudent',
                title: '完成的学生'
            },
            {
                field: 'price',
                title: '操作',
                width: 120,
                align: 'center',
                valign: 'middle',
                formatter: actionFormatter,
            },
        ]
    });

    function actionFormatter(value, row, index) {
        var id = value;
        var result = "";
        result += '<button id="edit" class="btn btn-info btn-sm" data-toggle="modal" data-target="#editModal">编辑</button>';
        result += '<button id="delete" class="btn btn-danger btn-sm" style="margin-left:10px;">删除</button>';
        return result;
    }

    $(document).ready(function () {
        $("#pwduser").click(function () {
            var dta = {ptr: $("#selectDay").val(), info: $("#textinfo").val()}
            $('#mytab').bootstrapTable('destroy');
            $('#mytab').bootstrapTable({
                url: '/getgroup',
                method: 'post',
                queryParamsType: '',
                queryParams: queryParams,
                toolbar: "#toolbar",
                sidePagination: "client",
                striped: true, // 是否显示行间隔色
                search: "true",
                uniqueId: "grpnum",
                pageSize: "5",
                pagination: true, // 是否分页
                sortable: true, // 是否启用排序
                columns: [{
                    field: 'grpnum',
                    title: 'Номер группы'
                },
                    {
                        field: 'examid',
                        title: 'Номер вопроса'
                    },
                    {
                        field: 'examname',
                        title: 'Название тестового вопроса'
                    },
                    {
                        field: 'examgroup',
                        title: 'группа'
                    },
                    {
                        field: 'statdate',
                        title: 'Дата начала'
                    },
                    {
                        field: 'enddate',
                        title: 'Дата окончания'
                    },
                    {
                        field: 'examtime',
                        title: 'Продолжительность экзамена'
                    },
                    {
                        field: 'examlist',
                        title: 'Количество тестовых вопросов'
                    },
                    {
                        field: 'examsouces',
                        title: 'Общий балл теста'
                    },
                    {
                        field: 'examstudent',
                        title: 'Завершенные студенты'
                    },
                    {
                        field: 'price',
                        title: '操作',
                        width: 120,
                        align: 'center',
                        valign: 'middle',
                        formatter: actionFormatter,
                    },
                ]
            });

            function actionFormatter(value, row, index) {
                var id = value;
                var result = "";
                result += '<button id="edit" class="btn btn-info btn-sm" data-toggle="modal" data-target="#editModal">редактор</button>';
                result += '<button id="delete" class="btn btn-danger btn-sm" style="margin-left:10px;">удалить</button>';
                return result;
            }

            function queryParams(params) {
                return {
                    ptr: $.trim($("#selectDay").val()),
                    info: $.trim($("#textinfo").val())
                }
            }
        })
    })
    $(document).ready(function () {
        $("#addtest").click(function () {
            window.open("/testinfo/testadd.html");
        })
    })
</script>
</html>