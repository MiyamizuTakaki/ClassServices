<html lang="en">
<head>
    <!-- 新 Bootstrap4 核心 CSS 文件 -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/css/bootstrap.min.css" rel="stylesheet">

    <!-- jQuery文件。务必在bootstrap.min.js 之前引入 -->
    <!--    <link rel="stylesheet" type="text/css" href="/css/jquery.datetimepicker.css" >-->

    <script src="https://www.itxst.com/package/jquery-3.5.1/jquery.min.js"></script>
    <!-- popper.min.js 用于弹窗、提示、下拉菜单 -->
    <script src="/js/popper.min.js"></script>
    <!-- 最新的 Bootstrap4 核心 JavaScript 文件 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/js/bootstrap.min.js"></script>
    <script src="/js/jquery.cookie.min.js"></script>
    <!--    <script src="/js/jquery.datetimepicker.full.js"></script>-->
    <!--    <script type="text/javascript" src="/js/jquery.datetimepicker.full.js"></script>-->
    <meta charset="UTF-8">
    <link href="/css/normalform.css" rel="stylesheet" type="text/css">
    <link href="/js/veritylogin.js" rel="stylesheet" type="text/css">
    <link href="/css/bootstrap-table.min.css" rel="stylesheet">
    <script src="/js/bootstrap-table.min.js"></script>
    <!--    <link href="/css/bootstrap-datetimepicker.min.css" media="screen" rel="stylesheet"/>-->
    <script src="/js/moment.min.js"></script>
    <link href="/css/bootstrap-datetimepicker.min.css" rel="stylesheet" type="text/css">
    <script src="/js/bootstrap-datetimepicker.min.js"></script>

    <!--<script src="/js/navgeter.js" type="application/javascript"></script>-->
    <title>我的课表</title>
</head>
<div class="container">
    <div class="row">
        <div class="col-8">用户管理</div>
        <div class="col-1">
            <button class="btn btn-primary" data-target="#myModal" data-toggle="modal" type="button">创建用户</button>
        </div>
    </div>
    <div class="row">
        <div class="col-4">
            <label for="selectDay">筛选条件</label><select class="form-control form-control-placeholder"
                                                           id="selectDay">
            <option disabled hidden id="chse1" selected value="-1">全选</option>
            <option style="color: black;" value="-1">全选</option>
            <option style="color: black;" value="0">姓名</option>
            <option style="color: black;" value="1">学号</option>
            <option style="color: black;" value="2">生日</option>
            <option style="color: black;" value="3">组号</option>
            <option style="color: black;" value="4">院系名称</option>
        </select>
        </div>
        <div class="col-4"><label>筛选条件</label>

            <input class="form-control" id="textinfo" placeholder="内容" type="text"></div>
        <div class="col-4">
            <div class="col-4"><label>然后就</label>
                <button class="btn btn-primary" data-dismiss="modal" id="pwduser">搜索</button>
            </div>
        </div>
    </div>
    <div id="magerinfo">
        <table class="table table-hover" id="mytab"></table>
    </div>
    <div class="modal fade" id="myModal">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <!-- 模态框头部 -->
                <div class="modal-header">
                    <h4 class="modal-title">创建用户</h4>
                    <button class="close" data-dismiss="modal" type="button">&times;</button>
                </div>
                <form>
                    <!-- 模态框主体 -->
                    <div class="modal-body">
                        <div class="form-group">
                            <label for="name">用户名</label>
                            <input class="form-control" id="name" type="text">
                        </div>
                        <div class="form-group">
                            <label for="usr">用户别名</label>
                            <input class="form-control" id="usr" type="text">
                        </div>
                        <div class="form-group">
                            <label for="pwd">密码:</label>
                            <input class="form-control" id="pwd" type="password">
                        </div>
                        <div class="form-group">
                            <label for="fakt">院系部门</label>
                            <select class="form-control form-control-placeholder"
                                    id="fakt">
                                <option disabled hidden id="none1" selected value="-1">全选</option>
                                <option style="color: black;" value="-1">全选</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="grp">小组/院系号码</label>
                            <select class="form-control form-control-placeholder"
                                    id="grp">
                                <option disabled hidden id="none" selected value="-1">全选</option>
                                <option style="color: black;" value="-1">全选</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="id_end_time">Date only:</label>
                            <div class="input-group date" id="id_4">
                                <input class="form-control" required type="text" value="12/06/2022"/>
                                <div class="input-group-addon input-group-append">
                                    <div class="input-group-text">
                                        <i class="glyphicon glyphicon-calendar fa fa-calendar"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- 模态框底部 -->
                    <div class="modal-footer">
                        <button class="btn btn-primary " data-dismiss="modal" type="submit">提交</button>
                        <button class="btn btn-secondary" data-dismiss="modal" type="button">关闭</button>
                    </div>
            </form>
        </div>
    </div>
</div>
</div>
<script>
    $('#mytab').bootstrapTable({
        url: '/getuser?ptr=-1',
        method: 'get',
        toolbar: "#toolbar",
        sidePagination: "client",
        striped: true, // 是否显示行间隔色
        search: "true",
        uniqueId: "ID",
        pageSize: "5",
        pagination: true, // 是否分页
        sortable: true, // 是否启用排序
        columns: [{
            field: 'id',
            title: '证件号'
        },
            {
                field: 'name',
                title: '姓名'
            },
            {
                field: 'nickname',
                title: '用户昵称'
            },
            {
                field: 'facid',
                title: '课程号码'
            },
            {
                field: 'mfacid',
                title: '小组号码'
            },
            {
                field: 'price',
                title: '角色'
            },
            {
                field: 'clsnumber',
                title: '课程号码'
            },
            {
                field: 'fakt',
                title: '院系'
            },
            {
                field: 'date',
                title: '生日'
            },
            {
                field: 'phone',
                title: '电话号码'
            },
            {
                field: 'email',
                title: '电子邮件'
            },
            {
                field: 'ststu',
                title: '学习开始日期'
            },
            {
                field: 'endstu',
                title: '学习结束日期'
            },
            {
                field: 'price',
                title: '操作',
                width: 120,
                align: 'center',
                valign: 'middle',
                formatter: actionFormatter,
            },
        ]
    });
    $('#id_4').datetimepicker({
            "allowInputToggle": true,
            "showClose": true,
            "showClear": true,
            "showTodayButton": true,
            "format": "MM/DD/YYYY",
        });

    function actionFormatter(value, row, index) {
        var id = value;
        var result = "";
        result += '<button id="edit" class="btn btn-info btn-sm" data-toggle="modal" data-target="#editModal">编辑</button>';
        result += '<button id="delete" class="btn btn-danger btn-sm" style="margin-left:10px;">删除</button>';
        return result;
    }

    $(document).ready(function () {

        $("#pwduser").click(function () {
            var dta = {ptr: $("#selectDay").val(), info: $("#textinfo").val()}
            $('#mytab').bootstrapTable('destroy');
            $('#mytab').bootstrapTable({
                url: '/getuser',
                method: 'post',
                queryParamsType: '',
                queryParams: queryParams,
                toolbar: "#toolbar",
                sidePagination: "client",
                striped: true, // 是否显示行间隔色
                search: "true",
                uniqueId: "ID",
                pageSize: "5",
                pagination: true, // 是否分页
                sortable: true, // 是否启用排序
                columns: [{
                    field: 'id',
                    title: '证件号'
                },
                    {
                        field: 'name',
                        title: '姓名'
                    },
                    {
                        field: 'nickname',
                        title: '用户昵称'
                    },
                    {
                        field: 'facid',
                        title: '课程号码'
                    },
                    {
                        field: 'mfacid',
                        title: '小组号码'
                    },
                    {
                        field: 'price',
                        title: '角色'
                    },
                    {
                        field: 'clsnumber',
                        title: '课程号码'
                    },
                    {
                        field: 'fakt',
                        title: '院系'
                    },
                    {
                        field: 'date',
                        title: '生日'
                    },
                    {
                        field: 'phone',
                        title: '电话号码'
                    },
                    {
                        field: 'email',
                        title: '电子邮件'
                    },
                    {
                        field: 'ststu',
                        title: '学习开始日期'
                    },
                    {
                        field: 'endstu',
                        title: '学习结束日期'
                    },
                    {
                        field: 'price',
                        title: '操作',
                        width: 120,
                        align: 'center',
                        valign: 'middle',
                        formatter: actionFormatter,
                    },
                ]
            });

            function queryParams(params) {
                return {
                    ptr: $.trim($("#selectDay").val()),
                    info: $.trim($("#textinfo").val())
                }
            }
        })
    })

</script>
</html>